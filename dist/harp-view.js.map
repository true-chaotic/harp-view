{"version":3,"sources":["helpers/insertAfter.js","helpers/translate.js","helpers/tuneValid.js","helpers/createElement.js","viewer.js","vendor/ion.sound.js","player.js","helpers/noop.js","ticker.js","controller-view.js","helpers/isPause.js","controller.js","harp-view.js"],"names":["insertAfter","newNode","referenceNode","parentNode","insertBefore","nextSibling","translate","translations","lang","key","tuneValid","tune","Boolean","createElement","name","classes","listeners","element","document","classesArray","classList","add","Object","keys","forEach","event","addEventListener","Viewer","$el","assign","style","padding","note","innerText","border","borderRadius","display","appendChild","highLight","backgroundColor","dim","dimAll","window","navigator","$","undefined","ion","sound","warn","text","console","log","d","length","a","html","extend","parent","child","prop","hasOwnProperty","Audio","func","play","stop","pause","preload","destroy","is_iOS","i","test","appVersion","sounds_num","settings","sounds","supported","options","obj","path","volume","multiplay","loop","sprite","scope","ready_callback","ended_callback","alias","Sound","init","VERSION","_method","method","ionSound","AudioContext","audio","webkitAudioContext","request","streams","result","ext","url","loaded","decoded","no_file","autoplay","prototype","load","stream","buffer","removeEventListener","ready","bind","error","abort","createUrl","no_cache","Date","valueOf","encodeURIComponent","XMLHttpRequest","open","responseType","send","reload","data","target","readyState","status","decode","decodeAudioData","response","setBuffer","config","duration","call","start","end","Stream","part","setVolume","sprite_part","setLoop","source","gain","playing","paused","time_started","time_ended","time_played","time_offset","disconnect","update","createGain","createBufferSource","connect","destination","value","onended","ended","_play","clear","noteOn","noteOff","_ended","item","can_play_mp3","canPlayType","can_play_ogg","can_play_aac","splice","checkSupport","inited","_ready","_scope","start_time","paused_time","played_time","can_play_through","_update","rand","src","currentTime","e","current_time","setTimeout","looper","jQuery","Player","NOTES","SNAP","K","C","D","E","F","G","A","B","c","f","g","b","instance","GlobalPlayer","values","map","playNote","playSnap","noop","second","minute","Ticker","interval","ticksPerMinute","onTick","clearInterval","setInterval","ControllerView","onPlay","onStop","viewerElement","block","state","playButton","click","updateButton","viewerContainer","isPause","PAUSES","Set","has","Controller","ticker","controllerView","tick","tuneIndex","tuneArray","split","viewer","player","HarpView","selector","querySelectorAll","node","innerHTML","trim"],"mappings":";AAQC,aAFc,SAASA,EAAYC,EAASC,GAC3CA,EAAcC,WAAWC,aAAaH,EAASC,EAAcG,aAC9D,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA;;ACsBcC,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA9Bf,IAAMC,EAAe,CACb,GAAA,CACc,iBAAA,+BACV,KAAA,OACC,MAAA,QACD,KAAA,QAGJ,GAAA,CACc,iBAAA,qCACV,KAAA,SACC,MAAA,QACD,KAAA,eAINC,EAAO,KAQPF,EAAY,SAAAG,GAChBF,OAAAA,GACGA,EAAaC,IACbD,EAAaC,GAAMC,IACnBA,GAEUH,EAAAA,EAAAA,QAAAA,QAAAA;;ACpBd,aAFc,SAASI,EAAUC,GACzBC,OAAAA,QAAQD,GAChB,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA;;ACWA,aAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,mDAAA,SAAA,EAAA,GAAA,GAAA,OAAA,YAAA,OAAA,IAAA,uBAAA,OAAA,UAAA,SAAA,KAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,CAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,EAAA,QAAA,EAAA,EAAA,OAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,GAbc,SAASE,EAAcC,GAAoC,IAAA,EAA9BC,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAAIC,EAAY,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAC9DC,EAAUC,SAASL,cAAcC,GACjCK,EAAkC,iBAAZJ,EACxB,CAACA,GACDA,EAQGE,OANPA,EAAAA,EAAQG,WAAUC,IAAOF,MAAAA,EAAAA,EAAAA,IAEzBG,OAAOC,KAAKP,GAAWQ,QAAQ,SAAAC,GAC7BR,EAAQS,iBAAiBD,EAAOT,EAAUS,MAGrCR,EACR,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA;;ACSA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EA9BD,IAAA,EAAA,EAAA,QAAA,4BA8BC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA5Bc,SAASU,IAChBC,IAAAA,GAAM,EAAc,EAAA,SAAA,MAAO,gBACjCN,OAAOO,OAAOD,EAAIE,MAAO,CACvBC,QAAS,SAGLC,IAAAA,GAAO,EAAc,EAAA,SAAA,OAAQ,sBAY5B,OAXPA,EAAKC,UAAY,IAEjBX,OAAOO,OAAOG,EAAKF,MAAO,CACxBI,OAAQ,kBACRC,aAAc,OACdJ,QAAS,WACTK,QAAS,iBAGXR,EAAIS,YAAYL,GAET,CACLJ,IAAAA,EACAU,UAAW,WACTN,EAAKF,MAAMS,gBAAkB,SAE/BC,IAAK,aACLC,OAAQ,WACNT,EAAKF,MAAMS,gBAAkB;;ACflC,SAAA,EAAA,GAAA,OAAA,EAAA,mBAAA,QAAA,iBAAA,OAAA,SAAA,SAAA,GAAA,cAAA,GAAA,SAAA,GAAA,OAAA,GAAA,mBAAA,QAAA,EAAA,cAAA,QAAA,IAAA,OAAA,UAAA,gBAAA,IAAA,IAAC,SAAUG,EAAQC,EAAWC,EAAGC,GAC9B,aAIIC,GAFJJ,EAAOI,IAAMJ,EAAOI,KAAO,IAEvBA,IAAIC,MAAJD,CAIAE,IAAAA,EAAO,SAAUC,GAGbP,GAFCO,IAAMA,EAAO,aAEdP,EAAOQ,QAAS,CACZA,QAAQF,MAAgC,mBAAjBE,QAAQF,KAC/BE,QAAQF,KAAKC,GACNC,QAAQC,KAA8B,mBAAhBD,QAAQC,KACrCD,QAAQC,IAAIF,GAGZG,IAAAA,EAAIR,GAAKA,EAAE,UACXQ,GAAAA,GAAKA,EAAEC,OAAQ,CACXC,IAAAA,EAAIF,EAAEG,OACVH,EAAEG,KAAKD,EAAIL,EAAO,YAK1BO,EAAS,SAAUC,EAAQC,GACvBC,IAAAA,EAGCA,IAAAA,KAFLD,EAAQA,GAAS,GAEJD,EACLA,EAAOG,eAAeD,KACtBD,EAAMC,GAAQF,EAAOE,IAItBD,OAAAA,GASP,GAAiB,mBAAVG,OAAyC,YAAVA,oBAAAA,MAAAA,YAAAA,EAAAA,QAAoB,CACtDC,IAAAA,EAAO,WACPd,EAAK,iDAST,OAPAF,IAAIC,MAAQe,EACZhB,IAAIC,MAAMgB,KAAOD,EACjBhB,IAAIC,MAAMiB,KAAOF,EACjBhB,IAAIC,MAAMkB,MAAQH,EAClBhB,IAAIC,MAAMmB,QAAUJ,EACpBhB,IAAIC,MAAMoB,QAAUL,OACpBA,IAYAM,IAIAC,EAJAD,EAAS,mBAAmBE,KAAK3B,EAAU4B,YAC3CC,EAAa,EACbC,EAAW,GACXC,EAAS,IAKRD,EAASE,WAAaP,EACvBK,EAASE,UAAY,CAAC,MAAO,MAAO,OAC5BF,EAASE,YACjBF,EAASE,UAAY,CAAC,MAAO,MAAO,MAAO,MAAO,QAYtD7B,IAAIC,MAAQ,SAAU6B,GATJ,IAAUC,EACpB/D,EAuBA,GAdJ0C,EAAOoB,EAASH,GAEhBA,EAASK,KAAOL,EAASK,MAAQ,GACjCL,EAASM,OAASN,EAASM,QAAU,EACrCN,EAASP,QAAUO,EAASP,UAAW,EACvCO,EAASO,UAAYP,EAASO,YAAa,EAC3CP,EAASQ,KAAOR,EAASQ,OAAQ,EACjCR,EAASS,OAAST,EAASS,QAAU,KACrCT,EAASU,MAAQV,EAASU,OAAS,KACnCV,EAASW,eAAiBX,EAASW,gBAAkB,KACrDX,EAASY,eAAiBZ,EAASY,gBAAkB,KAErDb,EAAaC,EAASC,OAAOrB,OAOxBgB,IAAAA,EAAI,EAAGA,EAAIG,EAAYH,IA7BJQ,EA8BRJ,EAASC,OAAOL,GA7B5BvD,OAAAA,EAAAA,EAAO+D,EAAIS,OAAST,EAAI/D,KAEvB4D,EAAO5D,KACR4D,EAAO5D,GAAQ,IAAIyE,EAAMV,GACzBH,EAAO5D,GAAM0E,aAoBbxC,EAAK,6BASbF,IAAIC,MAAM0C,QAAU,QAEpB3C,IAAIC,MAAM2C,QAAU,SAAUC,EAAQ7E,EAAM8D,GACpC9D,GAAAA,EACA4D,EAAO5D,IAAS4D,EAAO5D,GAAM6E,GAAQf,QAEhCP,IAAAA,KAAKK,EACDA,EAAOd,eAAeS,IAAOK,EAAOL,IAIzCK,EAAOL,GAAGsB,GAAQf,IAK9B9B,IAAIC,MAAMmB,QAAU,SAAUpD,EAAM8D,GAEhCpB,EAAO,CAACU,SAAS,GADjBU,EAAUA,GAAW,IAGrB9B,IAAIC,MAAM2C,QAAQ,OAAQ5E,EAAM8D,IAGpC9B,IAAIC,MAAMoB,QAAU,SAAUrD,GAGtBA,GAFJgC,IAAIC,MAAM2C,QAAQ,UAAW5E,GAEzBA,EACA4D,EAAO5D,GAAQ,UAEVuD,IAAAA,KAAKK,EACDA,EAAOd,eAAeS,IAGvBK,EAAOL,KACPK,EAAOL,GAAK,OAM5BvB,IAAIC,MAAMgB,KAAO,SAAUjD,EAAM8D,GAC7B9B,IAAIC,MAAM2C,QAAQ,OAAQ5E,EAAM8D,IAGpC9B,IAAIC,MAAMiB,KAAO,SAAUlD,EAAM8D,GAC7B9B,IAAIC,MAAM2C,QAAQ,OAAQ5E,EAAM8D,IAGpC9B,IAAIC,MAAMkB,MAAQ,SAAUnD,EAAM8D,GAC9B9B,IAAIC,MAAM2C,QAAQ,QAAS5E,EAAM8D,IAGrC9B,IAAIC,MAAMgC,OAAS,SAAUjE,EAAM8D,GAC/B9B,IAAIC,MAAM2C,QAAQ,SAAU5E,EAAM8D,IAGlChC,IACAA,EAAEgD,SAAW9C,IAAIC,OAUjB8C,IACAC,EADAD,EAAenD,EAAOmD,cAAgBnD,EAAOqD,mBAG7CF,IACAC,EAAQ,IAAID,GAIZN,IAAAA,EAAQ,SAAUX,GACbA,KAAAA,QAAUpB,EAAOiB,UACf,KAAKG,QAAQF,OACpBlB,EAAOoB,EAAS,KAAKA,SAEhBoB,KAAAA,QAAU,KACVC,KAAAA,QAAU,GACVC,KAAAA,OAAS,GACTC,KAAAA,IAAM,EACNC,KAAAA,IAAM,GAENC,KAAAA,QAAS,EACTC,KAAAA,SAAU,EACVC,KAAAA,SAAU,EACVC,KAAAA,UAAW,GAGpBjB,EAAMkB,UAAY,CACdjB,KAAM,SAAUZ,GACRA,GACApB,EAAOoB,EAAS,KAAKA,SAGrB,KAAKA,QAAQV,SACRwC,KAAAA,QAIbvC,QAAS,WACDwC,IAAAA,EAECtC,IAAAA,KAAK,KAAK4B,SACXU,EAAS,KAAKV,QAAQ5B,MAGlBsC,EAAOxC,UACPwC,EAAS,MAGZV,KAAAA,QAAU,GACVC,KAAAA,OAAS,KACTtB,KAAAA,QAAQgC,OAAS,KACjBhC,KAAAA,QAAU,KAEX,KAAKoB,UACAA,KAAAA,QAAQa,oBAAoB,OAAQ,KAAKC,MAAMC,KAAK,OAAO,GAC3Df,KAAAA,QAAQa,oBAAoB,QAAS,KAAKG,MAAMD,KAAK,OAAO,GAC5Df,KAAAA,QAAQiB,QACRjB,KAAAA,QAAU,OAIvBkB,UAAW,WACHC,IAAAA,GAAW,IAAIC,MAAOC,UACrBjB,KAAAA,IAAM,KAAKxB,QAAQE,KAAOwC,mBAAmB,KAAK1C,QAAQ9D,MAAQ,IAAM,KAAK8D,QAAQD,UAAU,KAAKwB,KAAO,IAAMgB,GAG1HT,KAAM,WACE,KAAKH,QACLvD,EAAK,mBAAsB,KAAK4B,QAAQ9D,KAAO,cAI/C,KAAKkF,UAIJkB,KAAAA,YAEAlB,KAAAA,QAAU,IAAIuB,eACdvB,KAAAA,QAAQwB,KAAK,MAAO,KAAKpB,KAAK,GAC9BJ,KAAAA,QAAQyB,aAAe,cACvBzB,KAAAA,QAAQtE,iBAAiB,OAAQ,KAAKoF,MAAMC,KAAK,OAAO,GACxDf,KAAAA,QAAQtE,iBAAiB,QAAS,KAAKsF,MAAMD,KAAK,OAAO,GAEzDf,KAAAA,QAAQ0B,SAGjBC,OAAQ,WACCxB,KAAAA,MAED,KAAKvB,QAAQD,UAAU,KAAKwB,KACvBO,KAAAA,QAEAH,KAAAA,SAAU,EACfvD,EAAK,mBAAsB,KAAK4B,QAAQ9D,KAAO,gBAIvDgG,MAAO,SAAUc,GAGT,GAFC1B,KAAAA,OAAS0B,EAAKC,OAEY,IAA3B,KAAK3B,OAAO4B,WAAZ,CAKA,GAAuB,MAAvB,KAAK5B,OAAO6B,QAAyC,IAAvB,KAAK7B,OAAO6B,OAG1C,OAFA/E,EAAK,KAAKoD,IAAM,kCACXuB,KAAAA,SAIJ3B,KAAAA,QAAQa,oBAAoB,OAAQ,KAAKC,MAAMC,KAAK,OAAO,GAC3Df,KAAAA,QAAQa,oBAAoB,QAAS,KAAKG,MAAMD,KAAK,OAAO,GAC5Df,KAAAA,QAAU,KACVK,KAAAA,QAAS,EAGT2B,KAAAA,cAhBIL,KAAAA,UAmBbK,OAAQ,WACClC,GAILA,EAAMmC,gBAAgB,KAAK/B,OAAOgC,SAAU,KAAKC,UAAUpB,KAAK,MAAO,KAAKC,MAAMD,KAAK,QAG3FoB,UAAW,SAAUvB,GACZhC,KAAAA,QAAQgC,OAASA,EACjBN,KAAAA,SAAU,EAGX8B,IAAAA,EAAS,CACTtH,KAAM,KAAK8D,QAAQ9D,KACnBwE,MAAO,KAAKV,QAAQU,MACpBa,IAAK,KAAKvB,QAAQD,UAAU,KAAKwB,KACjCkC,SAAU,KAAKzD,QAAQgC,OAAOyB,UAO9B,GAJA,KAAKzD,QAAQQ,gBAAyD,mBAAhC,KAAKR,QAAQQ,gBAC9CR,KAAAA,QAAQQ,eAAekD,KAAK,KAAK1D,QAAQO,MAAOiD,GAGrD,KAAKxD,QAAQM,OAERb,IAAAA,KAAK,KAAKO,QAAQM,OACdN,KAAAA,QAAQ2D,MAAQ,KAAK3D,QAAQM,OAAOb,GAAG,GACvCO,KAAAA,QAAQ4D,IAAM,KAAK5D,QAAQM,OAAOb,GAAG,GACrC4B,KAAAA,QAAQ5B,GAAK,IAAIoE,EAAO,KAAK7D,QAASP,QAK1C4B,KAAAA,QAAQ,GAAK,IAAIwC,EAAO,KAAK7D,SAIlC,KAAK4B,WACAA,KAAAA,UAAW,EACXzC,KAAAA,SAIbiD,MAAO,WACEW,KAAAA,UAGT5D,KAAM,SAAUa,GAOR,UANG,KAAKA,QAAQ8D,KAEhB9D,GACApB,EAAOoB,EAAS,KAAKA,UAGpB,KAAKyB,OAIN,OAHKG,KAAAA,UAAW,OACXE,KAAAA,OAKL,IAAA,KAAKH,SAAY,KAAKD,QAItB,GAAA,KAAK1B,QAAQM,OACT,GAAA,KAAKN,QAAQ8D,KACRzC,KAAAA,QAAQ,KAAKrB,QAAQ8D,MAAM3E,KAAK,KAAKa,cAErCP,IAAAA,KAAK,KAAKO,QAAQM,OACde,KAAAA,QAAQ5B,GAAGN,KAAK,KAAKa,cAI7BqB,KAAAA,QAAQ,GAAGlC,KAAK,KAAKa,UAIlCZ,KAAM,SAAUY,GACR,GAAA,KAAKA,QAAQM,OAETN,GAAAA,EACKqB,KAAAA,QAAQrB,EAAQ8D,MAAM1E,YAEtBK,IAAAA,KAAK,KAAKO,QAAQM,OACde,KAAAA,QAAQ5B,GAAGL,YAKnBiC,KAAAA,QAAQ,GAAGjC,QAIxBC,MAAO,SAAUW,GACT,GAAA,KAAKA,QAAQM,OAETN,GAAAA,EACKqB,KAAAA,QAAQrB,EAAQ8D,MAAMzE,aAEtBI,IAAAA,KAAK,KAAKO,QAAQM,OACde,KAAAA,QAAQ5B,GAAGJ,aAKnBgC,KAAAA,QAAQ,GAAGhC,SAIxBc,OAAQ,SAAUH,GACV+B,IAAAA,EAEA/B,GAAAA,EAMA,GALApB,EAAOoB,EAAS,KAAKA,SAKrB,KAAKA,QAAQM,OACT,GAAA,KAAKN,QAAQ8D,MACb/B,EAAS,KAAKV,QAAQ,KAAKrB,QAAQ8D,QACzB/B,EAAOgC,UAAU,KAAK/D,cAE3BP,IAAAA,KAAK,KAAKO,QAAQM,QACnByB,EAAS,KAAKV,QAAQ5B,KACZsC,EAAOgC,UAAU,KAAK/D,cAIxC+B,EAAS,KAAKV,QAAQ,KACZU,EAAOgC,UAAU,KAAK/D,WAOxC6D,IAAAA,EAAS,SAAU7D,EAASgE,GACvBtD,KAAAA,MAAQV,EAAQU,MAChBxE,KAAAA,KAAO8D,EAAQ9D,KACf8H,KAAAA,YAAcA,EAEdhC,KAAAA,OAAShC,EAAQgC,OACjB2B,KAAAA,MAAQ3D,EAAQ2D,OAAS,EACzBC,KAAAA,IAAM5D,EAAQ4D,KAAO,KAAK5B,OAAOyB,SACjCrD,KAAAA,UAAYJ,EAAQI,YAAa,EACjCD,KAAAA,OAASH,EAAQG,QAAU,EAC3BI,KAAAA,MAAQP,EAAQO,MAChBE,KAAAA,eAAiBT,EAAQS,eAEzBwD,KAAAA,QAAQjE,GAERkE,KAAAA,OAAS,KACTC,KAAAA,KAAO,KACPC,KAAAA,SAAU,EACVC,KAAAA,QAAS,EAETC,KAAAA,aAAe,EACfC,KAAAA,WAAa,EACbC,KAAAA,YAAc,EACdC,KAAAA,YAAc,GA2JnBvD,GAxJJ2C,EAAOhC,UAAY,CACftC,QAAS,WACAH,KAAAA,OAEA4C,KAAAA,OAAS,KACTkC,KAAAA,OAAS,KAETC,KAAAA,MAAQ,KAAKA,KAAKO,aAClBR,KAAAA,QAAU,KAAKA,OAAOQ,aACtBP,KAAAA,KAAO,KACPD,KAAAA,OAAS,MAGlBD,QAAS,SAAUjE,IACM,IAAjBA,EAAQK,KACHA,KAAAA,KAAO,QACmB,iBAAjBL,EAAQK,KACjBA,KAAAA,MAAQL,EAAQK,KAAO,EAEvBA,KAAAA,MAAO,GAIpBsE,OAAQ,SAAU3E,GACTiE,KAAAA,QAAQjE,GACT,WAAYA,IACPG,KAAAA,OAASH,EAAQG,SAI9BhB,KAAM,SAAUa,GACRA,GACK2E,KAAAA,OAAO3E,IAGX,KAAKI,WAAa,KAAKgE,UAIvBD,KAAAA,KAAOjD,EAAM0D,aACbV,KAAAA,OAAShD,EAAM2D,qBACfX,KAAAA,OAAOlC,OAAS,KAAKA,OACrBkC,KAAAA,OAAOY,QAAQ,KAAKX,MACpBA,KAAAA,KAAKW,QAAQ5D,EAAM6D,aACnBZ,KAAAA,KAAKA,KAAKa,MAAQ,KAAK7E,OAEvB+D,KAAAA,OAAOe,QAAU,KAAKC,MAAM/C,KAAK,MAEjCgD,KAAAA,UAGTA,MAAO,WACCxB,IAAAA,EACAC,EAEA,KAAKS,QACLV,EAAQ,KAAKA,MAAQ,KAAKc,YAC1Bb,EAAM,KAAKA,IAAM,KAAKa,cAEtBd,EAAQ,KAAKA,MACbC,EAAM,KAAKA,KAGXA,GAAO,EACFwB,KAAAA,SAIwB,mBAAtB,KAAKlB,OAAOP,MACdO,KAAAA,OAAOP,MAAM,EAAGA,EAAOC,GAEvBM,KAAAA,OAAOmB,OAAO,EAAG1B,EAAOC,GAG5BQ,KAAAA,SAAU,EACVC,KAAAA,QAAS,EACTC,KAAAA,cAAe,IAAI9B,MAAOC,YAGnCrD,KAAM,WACE,KAAKgF,SAAW,KAAKF,SACW,mBAArB,KAAKA,OAAO9E,KACd8E,KAAAA,OAAO9E,KAAK,GAEZ8E,KAAAA,OAAOoB,QAAQ,IAIvBF,KAAAA,SAGT/F,MAAO,WACC,KAAKgF,OACAlF,KAAAA,OAIJ,KAAKiF,UAILF,KAAAA,QAAU,KAAKA,OAAO9E,KAAK,GAC3BiF,KAAAA,QAAS,IAGlBa,MAAO,WACEd,KAAAA,SAAU,EACVG,KAAAA,YAAa,IAAI/B,MAAOC,UACxB+B,KAAAA,aAAe,KAAKD,WAAa,KAAKD,cAAgB,IACtDG,KAAAA,aAAe,KAAKD,aAErB,KAAKC,aAAe,KAAKb,KAAO,KAAKA,IAAM,KAAKa,YAAc,QACzDc,KAAAA,SACAH,KAAAA,QAED,KAAK/E,OACAA,KAAAA,OACAlB,KAAAA,UAKjBoG,OAAQ,WACA/B,IAAAA,EAAS,CACTtH,KAAM,KAAKA,KACXwE,MAAO,KAAKA,MACZoD,KAAM,KAAKE,YACXL,MAAO,KAAKA,MACZF,SAAU,KAAKG,KAGf,KAAKnD,gBAAiD,mBAAxB,KAAKA,gBAC9BA,KAAAA,eAAeiD,KAAK,KAAKnD,MAAOiD,IAI7C4B,MAAO,WACEZ,KAAAA,YAAc,EACdC,KAAAA,YAAc,EACdJ,KAAAA,QAAS,EACTD,KAAAA,SAAU,GAGnBL,UAAW,SAAU/D,GACZG,KAAAA,OAASH,EAAQG,OAElB,KAAKgE,OACAA,KAAAA,KAAKA,KAAKa,MAAQ,KAAK7E,WAKpCe,EAAAA,EAWe,WACX/C,IAIAqH,EAAM/F,EAJNtB,EAAQ,IAAIc,MACZwG,EAAetH,EAAMuH,YAAY,cACjCC,EAAexH,EAAMuH,YAAY,aACjCE,EAAezH,EAAMuH,YAAY,iCAGhCjG,IAAAA,EAAI,EAAGA,EAAII,EAASE,UAAUtB,OAAQgB,IACvC+F,EAAO3F,EAASE,UAAUN,GAErBgG,GAAyB,QAATD,GACjB3F,EAASE,UAAU8F,OAAOpG,EAAG,GAG5BkG,GAAyB,QAATH,GACjB3F,EAASE,UAAU8F,OAAOpG,EAAG,GAG5BmG,GAAyB,QAATJ,GACjB3F,EAASE,UAAU8F,OAAOpG,EAAG,GAG5BmG,GAAyB,QAATJ,GACjB3F,EAASE,UAAU8F,OAAOpG,EAAG,GAIrCtB,EAAQ,KAEZ2H,GAIAnF,EAAMkB,UAAY,CACdjB,KAAM,SAAUZ,GACRA,GACApB,EAAOoB,EAAS,KAAKA,SAGpB+F,KAAAA,QAAS,EAEV,KAAK/F,QAAQV,SACRwC,KAAAA,QAIbvC,QAAS,WACDwC,IAAAA,EAECtC,IAAAA,KAAK,KAAK4B,SACXU,EAAS,KAAKV,QAAQ5B,MAGlBsC,EAAOxC,UACPwC,EAAS,MAGZV,KAAAA,QAAU,GACVI,KAAAA,QAAS,EACTsE,KAAAA,QAAS,GAGlBjE,KAAM,WACEgC,IAAAA,EAMA,GAJC9D,KAAAA,QAAQV,SAAU,EAClBU,KAAAA,QAAQgG,OAAS,KAAK9D,MACtBlC,KAAAA,QAAQiG,OAAS,KAElB,KAAKjG,QAAQM,OAERb,IAAAA,KAAK,KAAKO,QAAQM,OACnBwD,EAAO,KAAK9D,QAAQM,OAAOb,GAEtBO,KAAAA,QAAQ2D,MAAQG,EAAK,GACrB9D,KAAAA,QAAQ4D,IAAME,EAAK,GAEnBzC,KAAAA,QAAQ5B,GAAK,IAAIoE,EAAO,KAAK7D,QAASP,QAK1C4B,KAAAA,QAAQ,GAAK,IAAIwC,EAAO,KAAK7D,UAK1CkC,MAAO,SAAUuB,GACT,IAAA,KAAKhC,OAAL,CAICA,KAAAA,QAAS,EAEV+B,IAAAA,EAAS,CACTtH,KAAM,KAAK8D,QAAQ9D,KACnBwE,MAAO,KAAKV,QAAQU,MACpBa,IAAK,KAAKvB,QAAQD,UAAU,KAAKwB,KACjCkC,SAAUA,GAGV,KAAKzD,QAAQQ,gBAAyD,mBAAhC,KAAKR,QAAQQ,gBAC9CR,KAAAA,QAAQQ,eAAekD,KAAK,KAAK1D,QAAQO,MAAOiD,GAGrD,KAAK5B,WACAA,KAAAA,UAAW,EACXzC,KAAAA,UAIbA,KAAM,SAAUa,GACR,GAAC,KAAK+F,OAWN,UAPG,KAAK/F,QAAQ8D,KAEhB9D,GACApB,EAAOoB,EAAS,KAAKA,SAGzB1B,QAAQC,IAAI,GACP,KAAKkD,OAWN,GAAA,KAAKzB,QAAQM,OACT,GAAA,KAAKN,QAAQ8D,KACRzC,KAAAA,QAAQ,KAAKrB,QAAQ8D,MAAM3E,KAAK,KAAKa,cAErCP,IAAAA,KAAK,KAAKO,QAAQM,OACde,KAAAA,QAAQ5B,GAAGN,KAAK,KAAKa,cAI7BqB,KAAAA,QAAQ,GAAGlC,KAAK,KAAKa,cAnBrB,KAAKA,QAAQV,QAITsC,KAAAA,UAAW,GAHXA,KAAAA,UAAW,EACXE,KAAAA,SAqBjB1C,KAAM,SAAUY,GACR,GAAC,KAAK+F,OAIN,GAAA,KAAK/F,QAAQM,OAETN,GAAAA,EACKqB,KAAAA,QAAQrB,EAAQ8D,MAAM1E,YAEtBK,IAAAA,KAAK,KAAKO,QAAQM,OACde,KAAAA,QAAQ5B,GAAGL,YAKnBiC,KAAAA,QAAQ,GAAGjC,QAIxBC,MAAO,SAAUW,GACT,GAAC,KAAK+F,OAIN,GAAA,KAAK/F,QAAQM,OAETN,GAAAA,EACKqB,KAAAA,QAAQrB,EAAQ8D,MAAMzE,aAEtBI,IAAAA,KAAK,KAAKO,QAAQM,OACde,KAAAA,QAAQ5B,GAAGJ,aAKnBgC,KAAAA,QAAQ,GAAGhC,SAIxBc,OAAQ,SAAUH,GACV+B,IAAAA,EAEA/B,GAAAA,EAMA,GALApB,EAAOoB,EAAS,KAAKA,SAKrB,KAAKA,QAAQM,OACT,GAAA,KAAKN,QAAQ8D,MACb/B,EAAS,KAAKV,QAAQ,KAAKrB,QAAQ8D,QACzB/B,EAAOgC,UAAU,KAAK/D,cAE3BP,IAAAA,KAAK,KAAKO,QAAQM,QACnByB,EAAS,KAAKV,QAAQ5B,KACZsC,EAAOgC,UAAU,KAAK/D,cAIxC+B,EAAS,KAAKV,QAAQ,KACZU,EAAOgC,UAAU,KAAK/D,YAO5C6D,EAAS,SAAU7D,EAASgE,GACnB9H,KAAAA,KAAO8D,EAAQ9D,KACfwE,KAAAA,MAAQV,EAAQU,MAChBsD,KAAAA,YAAcA,EAEd5D,KAAAA,UAAYJ,EAAQI,UACpBD,KAAAA,OAASH,EAAQG,OACjBb,KAAAA,QAAUU,EAAQV,QAClBY,KAAAA,KAAOL,EAASK,KAChByD,KAAAA,MAAQ3D,EAAQ2D,OAAS,EACzBC,KAAAA,IAAM5D,EAAQ4D,KAAO,EACrBrD,KAAAA,MAAQP,EAAQO,MAChBE,KAAAA,eAAiBT,EAAQS,eAEzBwF,KAAAA,OAASjG,EAAQiG,OACjBD,KAAAA,OAAShG,EAAQgG,OAEjB/B,KAAAA,QAAQjE,GAER7B,KAAAA,MAAQ,KACRqD,KAAAA,IAAM,KACNC,KAAAA,QAAS,EAETyE,KAAAA,WAAa,EACbC,KAAAA,YAAc,EACdC,KAAAA,YAAc,EAEdxF,KAAAA,SAGFiB,UAAY,CACfjB,KAAM,WACGzC,KAAAA,MAAQ,IAAIc,MACZd,KAAAA,MAAMgC,OAAS,KAAKA,OAEpBmC,KAAAA,YAEAnE,KAAAA,MAAMrB,iBAAiB,QAAS,KAAKoI,MAAM/C,KAAK,OAAO,GACvDhE,KAAAA,MAAMrB,iBAAiB,iBAAkB,KAAKuJ,iBAAiBlE,KAAK,OAAO,GAC3EhE,KAAAA,MAAMrB,iBAAiB,aAAc,KAAKwJ,QAAQnE,KAAK,OAAO,GAE9DL,KAAAA,QAGTvC,QAAS,WACAH,KAAAA,OAEAjB,KAAAA,MAAM8D,oBAAoB,QAAS,KAAKiD,MAAM/C,KAAK,OAAO,GAC1DhE,KAAAA,MAAM8D,oBAAoB,iBAAkB,KAAKoE,iBAAiBlE,KAAK,OAAO,GAC9EhE,KAAAA,MAAM8D,oBAAoB,aAAc,KAAKqE,QAAQnE,KAAK,OAAO,GAEjEhE,KAAAA,MAAQ,KACRsD,KAAAA,QAAS,GAGlBa,UAAW,WACHiE,IAAAA,GAAO,IAAI/D,MAAOC,UACjBjB,KAAAA,IAAM,KAAKtB,KAAOwC,mBAAmB,KAAKxG,MAAQ,IAAM2D,EAASE,UAAU,GAAK,IAAMwG,GAG/FF,iBAAkB,WACV,KAAK/G,SACA4C,KAAAA,SAIbJ,KAAM,WACG3D,KAAAA,MAAMqI,IAAM,KAAKhF,IACjBrD,KAAAA,MAAMmB,QAAU,KAAKA,QAAU,OAAS,OACzC,KAAKA,SACAnB,KAAAA,MAAM2D,QAInBmC,QAAS,SAAUjE,IACM,IAAjBA,EAAQK,KACHA,KAAAA,KAAO,QACmB,iBAAjBL,EAAQK,KACjBA,KAAAA,MAAQL,EAAQK,KAAO,EAEvBA,KAAAA,MAAO,GAIpBsE,OAAQ,SAAU3E,GACTiE,KAAAA,QAAQjE,GAET,WAAYA,IACPG,KAAAA,OAASH,EAAQG,SAI9B+B,MAAO,YACC,KAAKT,QAAW,KAAKtD,QAIpBsD,KAAAA,QAAS,EACTuE,KAAAA,OAAOtC,KAAK,KAAKuC,OAAQ,KAAK9H,MAAMsF,UAEpC,KAAKG,MACDA,KAAAA,IAAM,KAAKzF,MAAMsF,YAI9BtE,KAAM,SAAUa,GACRA,GACK2E,KAAAA,OAAO3E,IAGX,KAAKI,WAAa,KAAKgE,SAIvBe,KAAAA,SAGTA,MAAO,WACC,GAAA,KAAKd,OACAA,KAAAA,QAAS,OAEV,IACKlG,KAAAA,MAAMsI,YAAc,KAAK9C,MAChC,MAAO+C,IAGRtC,KAAAA,SAAU,EACV8B,KAAAA,YAAa,IAAI1D,MAAOC,UACxBtE,KAAAA,MAAMgC,OAAS,KAAKA,OACpBhC,KAAAA,MAAMgB,QAGfC,KAAM,WACE,GAAC,KAAKgF,QAAN,CAICA,KAAAA,SAAU,EACVC,KAAAA,QAAS,EACTlG,KAAAA,MAAMkB,QACN+F,KAAAA,QAED,IACKjH,KAAAA,MAAMsI,YAAc,KAAK9C,MAChC,MAAO+C,OAGbrH,MAAO,WACC,KAAKgF,OACAc,KAAAA,SAEAf,KAAAA,SAAU,EACVC,KAAAA,QAAS,EACTlG,KAAAA,MAAMkB,QACN8G,KAAAA,aAAc,IAAI3D,MAAOC,UACzB2D,KAAAA,aAAe,KAAKD,YAAc,KAAKD,aAIpDI,QAAS,WACD,GAAC,KAAKJ,WAAN,CAIAS,IACAP,GADe,IAAI5D,MAAOC,UACG,KAAKyD,YACxB,KAAKE,YAAcA,GAAe,KAElC,KAAKxC,KACX,KAAKQ,UACAhF,KAAAA,OACAmG,KAAAA,YAKjBL,MAAO,WACC,KAAKd,UACAhF,KAAAA,OACAmG,KAAAA,WAIbA,OAAQ,WACCnB,KAAAA,SAAU,EAEXZ,IAAAA,EAAS,CACTtH,KAAM,KAAKA,KACXwE,MAAO,KAAKA,MACZoD,KAAM,KAAKE,YACXL,MAAO,KAAKA,MACZF,SAAU,KAAKG,KAGf,KAAKnD,gBAAiD,mBAAxB,KAAKA,gBAC9BA,KAAAA,eAAeiD,KAAK,KAAKnD,MAAOiD,GAGrC,KAAKnD,MACLuG,WAAW,KAAKC,OAAO1E,KAAK,MAAO,KAI3C0E,OAAQ,WACCxG,KAAAA,OACAlB,KAAAA,QAGTiG,MAAO,WACEc,KAAAA,WAAa,EACbE,KAAAA,YAAc,EACdD,KAAAA,YAAc,GAGvBpC,UAAW,SAAU/D,GACZG,KAAAA,OAASH,EAAQG,OAElB,KAAKhC,QACAA,KAAAA,MAAMgC,OAAS,KAAKA,YAxiCvC,CA6iCCrC,OAAQC,UAAWD,OAAOgJ,QAAUhJ,OAAOE;;ACl/B/B+I,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAvEf,QAAA,sBAEA,IAAMC,EAAQ,CAEZC,KAAM,OACNC,EAAG,YACG,KAAA,YACNC,EAAG,YACHC,EAAG,YACHC,EAAG,YACHC,EAAG,YACHC,EAAG,YACHC,EAAG,YACHC,EAAG,YACHC,EAAG,YACHlJ,EAAG,YACHkI,EAAG,YACHiB,EAAG,YACHC,EAAG,YACHC,EAAG,YAKG,KAAA,YACA,KAAA,YACA,KAAA,YACA,KAAA,YACA,KAAA,YACA,KAAA,aAGFd,EAAU,WACVe,IAAAA,EAEKC,SAAAA,IACD7J,IAAAA,EAAMJ,OAAOI,IAcZ,OAZPA,EAAIC,MAAM,CACR2B,OAAQpD,OAAOsL,OAAOhB,GAAOiB,IAAI,SAAA/L,GAAS,MAAA,CACxCA,KAAAA,EACAiE,OAAQjE,IAAS8K,EAAMC,KACnB,EACA,MAEN/G,KAAM,UACNZ,SAAS,EACTc,WAAW,IAGN,CACL8H,SAAU,SAAC9K,GACL4J,EAAM5J,IACRc,EAAIC,MAAMgB,KAAK6H,EAAM5J,KAGzB+K,SAAU,WACRjK,EAAIC,MAAMgB,KAAK6H,EAAMC,QAKpB,OAAA,WAKEa,OAJFA,IACHA,EAAW,IAAIC,GAGVD,GAnCK,GAuCDf,EAAAA,EAAAA,QAAAA,QAAAA;;ACvEkB,aAAlB,SAASqB,KAAS,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA;;ACwBhC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EAtBD,IAAA,EAAA,EAAA,QAAA,mBAsBC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAxBD,IAAMC,EAAS,IACTC,EAAkB,GAATD,EAGA,SAASE,IAGpB,IACEC,EADF,EAAA,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAFFC,EAAAA,EAAAA,eAAAA,OAAiB,IAAA,EAAA,GAEX,EADNC,EAAAA,EAAAA,OAAAA,OAASN,IAAAA,EAAAA,EACH,QAAA,EAGGhJ,SAAAA,IACPuJ,cAAcH,GAST,MAAA,CACL7E,MAPOA,WACPvE,IAEAoJ,EAAWI,YAAYF,EAAQJ,EAASG,IAKxCrJ,KAAAA;;ACyBH,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EA/CD,IAAA,EAAA,EAAA,QAAA,mBACA,EAAA,EAAA,QAAA,4BACA,EAAA,EAAA,QAAA,wBA6CC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA3Cc,SAASyJ,IAKpB,IAAA,EAAA,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAJFC,EAAAA,EAAAA,OAAAA,OAASV,IAAAA,EAAAA,EAIH,QAAA,EAHNW,EAAAA,EAAAA,OAAAA,OAASX,IAAAA,EAAAA,EAGH,QAAA,EAFNY,EAAAA,EAAAA,cACAC,EAAAA,EAAAA,MAAAA,OAAQ,IAAA,EAAA,YACF,EACAC,EAAQ,CACZ9E,SAAS,GAGLpH,GAAM,EAAc,EAAA,SAAA,MAAOiM,GAC3BE,GAAa,EAAc,EAAA,SAAA,SAAaF,GAAAA,OAAAA,EAAe,UAAA,CAC3DG,MAAO,WACAF,EAAM9E,QAGT2E,IAFAD,OAOGO,SAAAA,IACPF,EAAW9L,WAAY,EAAG,EAAA,SAAC6L,EAAM9E,QAAmB,OAAT,QAG7CiF,IAEArM,EAAIS,YAAY0L,GAEVG,IAAAA,GAAkB,EAAc,EAAA,SAAA,MAAUL,GAAAA,OAAAA,EAAhD,aAUO,OATPK,EAAgB7L,YAAYuL,GAC5BhM,EAAIS,YAAY6L,GAQT,CACLtM,IAAAA,EACA2H,OAROA,SAAkC,GAA1BP,IAAAA,EAAAA,EAAAA,QAAAA,OAAU8E,IAAAA,EAAAA,EAAM9E,QAAU,EACzC8E,EAAM9E,QAAUA,EAEhBiF;;ACpCWE,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAJf,IAAMC,EAAS,IAAIC,IAAI,CAAC,IAAK,MAEvBF,EAAU,SAAAnM,GAAQoM,OAAAA,EAAOE,IAAItM,IAEpBmM,EAAAA,EAAAA,QAAAA,QAAAA;;AC+Ed,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EAnFD,IAAA,EAAA,EAAA,QAAA,aACA,EAAA,EAAA,QAAA,aACA,EAAA,EAAA,QAAA,aACA,EAAA,EAAA,QAAA,sBACA,EAAA,EAAA,QAAA,sBA+EC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA7Ec,SAASI,EAAmB,GAAP5N,IA0B9B6N,EACAC,EA3B8B9N,EAAAA,EAAAA,KAC9B+N,GAAQ,EACRC,GAAa,EAGXC,EAAYjO,EAAKkO,MAAM,IAKvBC,EAAS,IAAInN,EAAJ,QACToN,EAAS,IAAIpD,EAAJ,QAkBT3H,EAAO,WACX0K,GAAQ,EACRC,GAAa,EAEbF,EAAelF,OAAO,CAACP,SAAS,IAChCwF,EAAOxK,OACP8K,EAAOrM,UAyCFgM,OAhBPD,EAAS,IAAIrB,EAAJ,QAAW,CAClBE,eA1DmB,IA2DnBC,OAxBa,WAOToB,IANJA,GAAQ,GAhCW,GACE,GAkCnBI,EAAOrM,SAGLiM,EAtCe,GAsCS,EAAG,CAGzBC,IAFJA,GAAa,KAEKC,EAAUvL,OACnBW,OAAAA,IAnCLhC,EAAO4M,EAAUD,GAEvBG,EAAOrM,UAEH,EAAQT,EAAAA,SAAAA,KAIZ+M,EAAOjC,SAAS9K,GAChB8M,EAAOxM,UAAUN,IAVC,IACZA,EAyCF0M,EAjDe,GAiDS,GAC1BK,EAAOhC,eASX0B,EAAiB,IAAIhB,EAAJ,QAAmB,CAClCG,cAAekB,EAAOlN,IAEtB8L,OAAS,WACPe,EAAelF,OAAO,CAACP,SAAS,IAEhCwF,EAAOjG,SAEToF,OAAQ3J,KAGYpC;;AC7ExB,aALA,IAAA,EAAA,EAAA,QAAA,0BACA,EAAA,EAAA,QAAA,wBACA,EAAA,EAAA,QAAA,wBACA,EAAA,EAAA,QAAA,iBAEA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAAc,OAAOsM,SAAW,SAASC,GACzB/N,SAASgO,iBAAiB,IAAMD,GAAUzN,QAAQ,SAAA2N,GAC1CxO,IAAAA,EAAOwO,EAAKC,UAAUC,QAEvB,EAAU1O,EAAAA,SAAAA,IAMH,EAAA,EAAA,SAAA,IAAI4N,EAAJ,QAAe,CAAC5N,KAAAA,IAAQwO,GALlCjM,QAAQ8D,OAAM,EAAG,EAAA,SAAA,kBAAmBmI","file":"harp-view.js","sourceRoot":"../src","sourcesContent":["/**\n * insertAfter helper\n *\n * @param {Element} newNode\n * @param {Element} referenceNode\n */\nexport default function insertAfter(newNode, referenceNode) {\n  referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n}\n","const translations = {\n  'en': {\n    'error.bad-tune': \"Empty tune or unknown format\",\n    'play': 'Play',\n    'pause': 'Pause',\n    'stop': 'Stop'\n  },\n\n  'ru': {\n    'error.bad-tune': 'Пустая мелодия или ошибка в записи',\n    'play': 'Играть',\n    'pause': 'Пауза',\n    'stop': 'Остановить'\n  }\n};\n\nconst lang = 'en';\n\n/**\n * Translate by key\n *\n * @param key\n * @returns {string}\n */\nconst translate = key =>\n  translations\n  && translations[lang]\n  && translations[lang][key]\n  || key;\n\nexport default translate;\n","/**\n * Validates tune\n *  - not empty\n *  @TODO: conforms to chosen standard (e.g. abc)\n *\n * @param {string} tune\n * @returns {boolean}\n */\nexport default function tuneValid(tune) {\n  return Boolean(tune);\n}\n","/**\n * Creates element with class and listeners\n *\n * @param {string} name\n * @param {string|array} [classes=[]]\n * @param {object} [listeners={}]\n * @returns {Element}\n */\nexport default function createElement(name, classes = [], listeners = {}) {\n  const element = document.createElement(name);\n  const classesArray = typeof classes === 'string'\n    ? [classes]\n    : classes;\n\n  element.classList.add(...classesArray);\n\n  Object.keys(listeners).forEach(event => {\n    element.addEventListener(event, listeners[event]);\n  });\n\n  return element;\n}\n","import createElement from \"./helpers/createElement\";\n\nexport default function Viewer() {\n  const $el = createElement('div', 'notes-viewer');\n  Object.assign($el.style, {\n    padding: '10px'\n  });\n\n  const note = createElement('span', 'notes-viewer__note');\n  note.innerText = 'A';\n\n  Object.assign(note.style, {\n    border: '1px solid black',\n    borderRadius: '100%',\n    padding: '5px 10px',\n    display: 'inline-block'\n  });\n\n  $el.appendChild(note);\n\n  return {\n    $el,\n    highLight: () => {\n      note.style.backgroundColor = 'green';\n    },\n    dim: () => {},\n    dimAll: () => {\n      note.style.backgroundColor = 'transparent';\n    }\n  }\n}\n\n\n","/**\n * Ion.Sound\n * version 3.0.7 Build 89\n * © Denis Ineshin, 2016\n *\n * Project page:    http://ionden.com/a/plugins/ion.sound/en.html\n * GitHub page:     https://github.com/IonDen/ion.sound\n *\n * Released under MIT licence:\n * http://ionden.com/a/plugins/licence-en.html\n */\n\n;(function (window, navigator, $, undefined) {\n    \"use strict\";\n\n    window.ion = window.ion || {};\n\n    if (ion.sound) {\n        return;\n    }\n\n    var warn = function (text) {\n        if (!text) text = \"undefined\";\n\n        if (window.console) {\n            if (console.warn && typeof console.warn === \"function\") {\n                console.warn(text);\n            } else if (console.log && typeof console.log === \"function\") {\n                console.log(text);\n            }\n\n            var d = $ && $(\"#debug\");\n            if (d && d.length) {\n                var a = d.html();\n                d.html(a + text + '<br/>');\n            }\n        }\n    };\n\n    var extend = function (parent, child) {\n        var prop;\n        child = child || {};\n\n        for (prop in parent) {\n            if (parent.hasOwnProperty(prop)) {\n                child[prop] = parent[prop];\n            }\n        }\n\n        return child;\n    };\n\n\n\n    /**\n     * DISABLE for unsupported browsers\n     */\n\n    if (typeof Audio !== \"function\" && typeof Audio !== \"object\") {\n        var func = function () {\n            warn(\"HTML5 Audio is not supported in this browser\");\n        };\n        ion.sound = func;\n        ion.sound.play = func;\n        ion.sound.stop = func;\n        ion.sound.pause = func;\n        ion.sound.preload = func;\n        ion.sound.destroy = func;\n        func();\n        return;\n    }\n\n\n\n    /**\n     * CORE\n     * - creating sounds collection\n     * - public methods\n     */\n\n    var is_iOS = /iPad|iPhone|iPod/.test(navigator.appVersion),\n        sounds_num = 0,\n        settings = {},\n        sounds = {},\n        i;\n\n\n\n    if (!settings.supported && is_iOS) {\n        settings.supported = [\"mp3\", \"mp4\", \"aac\"];\n    } else if (!settings.supported) {\n        settings.supported = [\"mp3\", \"ogg\", \"mp4\", \"aac\", \"wav\"];\n    }\n\n    var createSound = function (obj) {\n        var name = obj.alias || obj.name;\n\n        if (!sounds[name]) {\n            sounds[name] = new Sound(obj);\n            sounds[name].init();\n        }\n    };\n\n    ion.sound = function (options) {\n        extend(options, settings);\n\n        settings.path = settings.path || \"\";\n        settings.volume = settings.volume || 1;\n        settings.preload = settings.preload || false;\n        settings.multiplay = settings.multiplay || false;\n        settings.loop = settings.loop || false;\n        settings.sprite = settings.sprite || null;\n        settings.scope = settings.scope || null;\n        settings.ready_callback = settings.ready_callback || null;\n        settings.ended_callback = settings.ended_callback || null;\n\n        sounds_num = settings.sounds.length;\n\n        if (!sounds_num) {\n            warn(\"No sound-files provided!\");\n            return;\n        }\n\n        for (i = 0; i < sounds_num; i++) {\n            createSound(settings.sounds[i]);\n        }\n    };\n\n    ion.sound.VERSION = \"3.0.7\";\n\n    ion.sound._method = function (method, name, options) {\n        if (name) {\n            sounds[name] && sounds[name][method](options);\n        } else {\n            for (i in sounds) {\n                if (!sounds.hasOwnProperty(i) || !sounds[i]) {\n                    continue;\n                }\n\n                sounds[i][method](options);\n            }\n        }\n    };\n\n    ion.sound.preload = function (name, options) {\n        options = options || {};\n        extend({preload: true}, options);\n\n        ion.sound._method(\"init\", name, options);\n    };\n\n    ion.sound.destroy = function (name) {\n        ion.sound._method(\"destroy\", name);\n\n        if (name) {\n            sounds[name] = null;\n        } else {\n            for (i in sounds) {\n                if (!sounds.hasOwnProperty(i)) {\n                    continue;\n                }\n                if (sounds[i]) {\n                    sounds[i] = null;\n                }\n            }\n        }\n    };\n\n    ion.sound.play = function (name, options) {\n        ion.sound._method(\"play\", name, options);\n    };\n\n    ion.sound.stop = function (name, options) {\n        ion.sound._method(\"stop\", name, options);\n    };\n\n    ion.sound.pause = function (name, options) {\n        ion.sound._method(\"pause\", name, options);\n    };\n\n    ion.sound.volume = function (name, options) {\n        ion.sound._method(\"volume\", name, options);\n    };\n\n    if ($) {\n        $.ionSound = ion.sound;\n    }\n\n\n\n    /**\n     * Web Audio API core\n     * - for most advanced browsers\n     */\n\n    var AudioContext = window.AudioContext || window.webkitAudioContext,\n        audio;\n\n    if (AudioContext) {\n        audio = new AudioContext();\n    }\n\n\n    var Sound = function (options) {\n        this.options = extend(settings);\n        delete this.options.sounds;\n        extend(options, this.options);\n\n        this.request = null;\n        this.streams = {};\n        this.result = {};\n        this.ext = 0;\n        this.url = \"\";\n\n        this.loaded = false;\n        this.decoded = false;\n        this.no_file = false;\n        this.autoplay = false;\n    };\n\n    Sound.prototype = {\n        init: function (options) {\n            if (options) {\n                extend(options, this.options);\n            }\n\n            if (this.options.preload) {\n                this.load();\n            }\n        },\n\n        destroy: function () {\n            var stream;\n\n            for (i in this.streams) {\n                stream = this.streams[i];\n\n                if (stream) {\n                    stream.destroy();\n                    stream = null;\n                }\n            }\n            this.streams = {};\n            this.result = null;\n            this.options.buffer = null;\n            this.options = null;\n\n            if (this.request) {\n                this.request.removeEventListener(\"load\", this.ready.bind(this), false);\n                this.request.removeEventListener(\"error\", this.error.bind(this), false);\n                this.request.abort();\n                this.request = null;\n            }\n        },\n\n        createUrl: function () {\n            var no_cache = new Date().valueOf();\n            this.url = this.options.path + encodeURIComponent(this.options.name) + \".\" + this.options.supported[this.ext] + \"?\" + no_cache;\n        },\n\n        load: function () {\n            if (this.no_file) {\n                warn(\"No sources for \\\"\" + this.options.name + \"\\\" sound :(\");\n                return;\n            }\n\n            if (this.request) {\n                return;\n            }\n\n            this.createUrl();\n\n            this.request = new XMLHttpRequest();\n            this.request.open(\"GET\", this.url, true);\n            this.request.responseType = \"arraybuffer\";\n            this.request.addEventListener(\"load\", this.ready.bind(this), false);\n            this.request.addEventListener(\"error\", this.error.bind(this), false);\n\n            this.request.send();\n        },\n\n        reload: function () {\n            this.ext++;\n\n            if (this.options.supported[this.ext]) {\n                this.load();\n            } else {\n                this.no_file = true;\n                warn(\"No sources for \\\"\" + this.options.name + \"\\\" sound :(\");\n            }\n        },\n\n        ready: function (data) {\n            this.result = data.target;\n\n            if (this.result.readyState !== 4) {\n                this.reload();\n                return;\n            }\n\n            if (this.result.status !== 200 && this.result.status !== 0) {\n                warn(this.url + \" was not found on server!\");\n                this.reload();\n                return;\n            }\n\n            this.request.removeEventListener(\"load\", this.ready.bind(this), false);\n            this.request.removeEventListener(\"error\", this.error.bind(this), false);\n            this.request = null;\n            this.loaded = true;\n            //warn(\"Loaded: \" + this.options.name + \".\" + settings.supported[this.ext]);\n\n            this.decode();\n        },\n\n        decode: function () {\n            if (!audio) {\n                return;\n            }\n\n            audio.decodeAudioData(this.result.response, this.setBuffer.bind(this), this.error.bind(this));\n        },\n\n        setBuffer: function (buffer) {\n            this.options.buffer = buffer;\n            this.decoded = true;\n            //warn(\"Decoded: \" + this.options.name + \".\" + settings.supported[this.ext]);\n\n            var config = {\n                name: this.options.name,\n                alias: this.options.alias,\n                ext: this.options.supported[this.ext],\n                duration: this.options.buffer.duration\n            };\n\n            if (this.options.ready_callback && typeof this.options.ready_callback === \"function\") {\n                this.options.ready_callback.call(this.options.scope, config);\n            }\n\n            if (this.options.sprite) {\n\n                for (i in this.options.sprite) {\n                    this.options.start = this.options.sprite[i][0];\n                    this.options.end = this.options.sprite[i][1];\n                    this.streams[i] = new Stream(this.options, i);\n                }\n\n            } else {\n\n                this.streams[0] = new Stream(this.options);\n\n            }\n\n            if (this.autoplay) {\n                this.autoplay = false;\n                this.play();\n            }\n        },\n\n        error: function () {\n            this.reload();\n        },\n\n        play: function (options) {\n            delete this.options.part;\n\n            if (options) {\n                extend(options, this.options);\n            }\n\n            if (!this.loaded) {\n                this.autoplay = true;\n                this.load();\n\n                return;\n            }\n\n            if (this.no_file || !this.decoded) {\n                return;\n            }\n\n            if (this.options.sprite) {\n                if (this.options.part) {\n                    this.streams[this.options.part].play(this.options);\n                } else {\n                    for (i in this.options.sprite) {\n                        this.streams[i].play(this.options);\n                    }\n                }\n            } else {\n                this.streams[0].play(this.options);\n            }\n        },\n\n        stop: function (options) {\n            if (this.options.sprite) {\n\n                if (options) {\n                    this.streams[options.part].stop();\n                } else {\n                    for (i in this.options.sprite) {\n                        this.streams[i].stop();\n                    }\n                }\n\n            } else {\n                this.streams[0].stop();\n            }\n        },\n\n        pause: function (options) {\n            if (this.options.sprite) {\n\n                if (options) {\n                    this.streams[options.part].pause();\n                } else {\n                    for (i in this.options.sprite) {\n                        this.streams[i].pause();\n                    }\n                }\n\n            } else {\n                this.streams[0].pause();\n            }\n        },\n\n        volume: function (options) {\n            var stream;\n\n            if (options) {\n                extend(options, this.options);\n            } else {\n                return;\n            }\n\n            if (this.options.sprite) {\n                if (this.options.part) {\n                    stream = this.streams[this.options.part];\n                    stream && stream.setVolume(this.options);\n                } else {\n                    for (i in this.options.sprite) {\n                        stream = this.streams[i];\n                        stream && stream.setVolume(this.options);\n                    }\n                }\n            } else {\n                stream = this.streams[0];\n                stream && stream.setVolume(this.options);\n            }\n        }\n    };\n\n\n\n    var Stream = function (options, sprite_part) {\n        this.alias = options.alias;\n        this.name = options.name;\n        this.sprite_part = sprite_part;\n\n        this.buffer = options.buffer;\n        this.start = options.start || 0;\n        this.end = options.end || this.buffer.duration;\n        this.multiplay = options.multiplay || false;\n        this.volume = options.volume || 1;\n        this.scope = options.scope;\n        this.ended_callback = options.ended_callback;\n\n        this.setLoop(options);\n\n        this.source = null;\n        this.gain = null;\n        this.playing = false;\n        this.paused = false;\n\n        this.time_started = 0;\n        this.time_ended = 0;\n        this.time_played = 0;\n        this.time_offset = 0;\n    };\n\n    Stream.prototype = {\n        destroy: function () {\n            this.stop();\n\n            this.buffer = null;\n            this.source = null;\n\n            this.gain && this.gain.disconnect();\n            this.source && this.source.disconnect();\n            this.gain = null;\n            this.source = null;\n        },\n\n        setLoop: function (options) {\n            if (options.loop === true) {\n                this.loop = 9999999;\n            } else if (typeof options.loop === \"number\") {\n                this.loop = +options.loop - 1;\n            } else {\n                this.loop = false;\n            }\n        },\n\n        update: function (options) {\n            this.setLoop(options);\n            if (\"volume\" in options) {\n                this.volume = options.volume;\n            }\n        },\n\n        play: function (options) {\n            if (options) {\n                this.update(options);\n            }\n\n            if (!this.multiplay && this.playing) {\n                return;\n            }\n\n            this.gain = audio.createGain();\n            this.source = audio.createBufferSource();\n            this.source.buffer = this.buffer;\n            this.source.connect(this.gain);\n            this.gain.connect(audio.destination);\n            this.gain.gain.value = this.volume;\n\n            this.source.onended = this.ended.bind(this);\n\n            this._play();\n        },\n\n        _play: function () {\n            var start,\n                end;\n\n            if (this.paused) {\n                start = this.start + this.time_offset;\n                end = this.end - this.time_offset;\n            } else {\n                start = this.start;\n                end = this.end;\n            }\n\n            if (end <= 0) {\n                this.clear();\n                return;\n            }\n\n            if (typeof this.source.start === \"function\") {\n                this.source.start(0, start, end);\n            } else {\n                this.source.noteOn(0, start, end);\n            }\n\n            this.playing = true;\n            this.paused = false;\n            this.time_started = new Date().valueOf();\n        },\n\n        stop: function () {\n            if (this.playing && this.source) {\n                if (typeof this.source.stop === \"function\") {\n                    this.source.stop(0);\n                } else {\n                    this.source.noteOff(0);\n                }\n            }\n\n            this.clear();\n        },\n\n        pause: function () {\n            if (this.paused) {\n                this.play();\n                return;\n            }\n\n            if (!this.playing) {\n                return;\n            }\n\n            this.source && this.source.stop(0);\n            this.paused = true;\n        },\n\n        ended: function () {\n            this.playing = false;\n            this.time_ended = new Date().valueOf();\n            this.time_played = (this.time_ended - this.time_started) / 1000;\n            this.time_offset += this.time_played;\n\n            if (this.time_offset >= this.end || this.end - this.time_offset < 0.015) {\n                this._ended();\n                this.clear();\n\n                if (this.loop) {\n                    this.loop--;\n                    this.play();\n                }\n            }\n        },\n\n        _ended: function () {\n            var config = {\n                name: this.name,\n                alias: this.alias,\n                part: this.sprite_part,\n                start: this.start,\n                duration: this.end\n            };\n\n            if (this.ended_callback && typeof this.ended_callback === \"function\") {\n                this.ended_callback.call(this.scope, config);\n            }\n        },\n\n        clear: function () {\n            this.time_played = 0;\n            this.time_offset = 0;\n            this.paused = false;\n            this.playing = false;\n        },\n\n        setVolume: function (options) {\n            this.volume = options.volume;\n\n            if (this.gain) {\n                this.gain.gain.value = this.volume;\n            }\n        }\n    };\n\n    if (audio) {\n        return;\n    }\n\n\n\n    /**\n     * Fallback for HTML5 audio\n     * - for not so modern browsers\n     */\n\n    var checkSupport = function () {\n        var sound = new Audio(),\n            can_play_mp3 = sound.canPlayType('audio/mpeg'),\n            can_play_ogg = sound.canPlayType('audio/ogg'),\n            can_play_aac = sound.canPlayType('audio/mp4; codecs=\"mp4a.40.2\"'),\n            item, i;\n\n        for (i = 0; i < settings.supported.length; i++) {\n            item = settings.supported[i];\n\n            if (!can_play_mp3 && item === \"mp3\") {\n                settings.supported.splice(i, 1);\n            }\n\n            if (!can_play_ogg && item === \"ogg\") {\n                settings.supported.splice(i, 1);\n            }\n\n            if (!can_play_aac && item === \"aac\") {\n                settings.supported.splice(i, 1);\n            }\n\n            if (!can_play_aac && item === \"mp4\") {\n                settings.supported.splice(i, 1);\n            }\n        }\n\n        sound = null;\n    };\n    checkSupport();\n\n\n\n    Sound.prototype = {\n        init: function (options) {\n            if (options) {\n                extend(options, this.options);\n            }\n\n            this.inited = true;\n\n            if (this.options.preload) {\n                this.load();\n            }\n        },\n\n        destroy: function () {\n            var stream;\n\n            for (i in this.streams) {\n                stream = this.streams[i];\n\n                if (stream) {\n                    stream.destroy();\n                    stream = null;\n                }\n            }\n            this.streams = {};\n            this.loaded = false;\n            this.inited = false;\n        },\n\n        load: function () {\n            var part;\n\n            this.options.preload = true;\n            this.options._ready = this.ready;\n            this.options._scope = this;\n\n            if (this.options.sprite) {\n\n                for (i in this.options.sprite) {\n                    part = this.options.sprite[i];\n\n                    this.options.start = part[0];\n                    this.options.end = part[1];\n\n                    this.streams[i] = new Stream(this.options, i);\n                }\n\n            } else {\n\n                this.streams[0] = new Stream(this.options);\n\n            }\n        },\n\n        ready: function (duration) {\n            if (this.loaded) {\n                return;\n            }\n\n            this.loaded = true;\n\n            var config = {\n                name: this.options.name,\n                alias: this.options.alias,\n                ext: this.options.supported[this.ext],\n                duration: duration\n            };\n\n            if (this.options.ready_callback && typeof this.options.ready_callback === \"function\") {\n                this.options.ready_callback.call(this.options.scope, config);\n            }\n\n            if (this.autoplay) {\n                this.autoplay = false;\n                this.play();\n            }\n        },\n\n        play: function (options) {\n            if (!this.inited) {\n                return;\n            }\n\n            delete this.options.part;\n\n            if (options) {\n                extend(options, this.options);\n            }\n\n            console.log(1);\n            if (!this.loaded) {\n                if (!this.options.preload) {\n                    this.autoplay = true;\n                    this.load();\n                } else {\n                    this.autoplay = true;\n                }\n\n                return;\n            }\n\n            if (this.options.sprite) {\n                if (this.options.part) {\n                    this.streams[this.options.part].play(this.options);\n                } else {\n                    for (i in this.options.sprite) {\n                        this.streams[i].play(this.options);\n                    }\n                }\n            } else {\n                this.streams[0].play(this.options);\n            }\n        },\n\n        stop: function (options) {\n            if (!this.inited) {\n                return;\n            }\n\n            if (this.options.sprite) {\n\n                if (options) {\n                    this.streams[options.part].stop();\n                } else {\n                    for (i in this.options.sprite) {\n                        this.streams[i].stop();\n                    }\n                }\n\n            } else {\n                this.streams[0].stop();\n            }\n        },\n\n        pause: function (options) {\n            if (!this.inited) {\n                return;\n            }\n\n            if (this.options.sprite) {\n\n                if (options) {\n                    this.streams[options.part].pause();\n                } else {\n                    for (i in this.options.sprite) {\n                        this.streams[i].pause();\n                    }\n                }\n\n            } else {\n                this.streams[0].pause();\n            }\n        },\n\n        volume: function (options) {\n            var stream;\n\n            if (options) {\n                extend(options, this.options);\n            } else {\n                return;\n            }\n\n            if (this.options.sprite) {\n                if (this.options.part) {\n                    stream = this.streams[this.options.part];\n                    stream && stream.setVolume(this.options);\n                } else {\n                    for (i in this.options.sprite) {\n                        stream = this.streams[i];\n                        stream && stream.setVolume(this.options);\n                    }\n                }\n            } else {\n                stream = this.streams[0];\n                stream && stream.setVolume(this.options);\n            }\n        }\n    };\n\n\n\n    Stream = function (options, sprite_part) {\n        this.name = options.name;\n        this.alias = options.alias;\n        this.sprite_part = sprite_part;\n\n        this.multiplay = options.multiplay;\n        this.volume = options.volume;\n        this.preload = options.preload;\n        this.path = settings.path;\n        this.start = options.start || 0;\n        this.end = options.end || 0;\n        this.scope = options.scope;\n        this.ended_callback = options.ended_callback;\n\n        this._scope = options._scope;\n        this._ready = options._ready;\n\n        this.setLoop(options);\n\n        this.sound = null;\n        this.url = null;\n        this.loaded = false;\n\n        this.start_time = 0;\n        this.paused_time = 0;\n        this.played_time = 0;\n\n        this.init();\n    };\n\n    Stream.prototype = {\n        init: function () {\n            this.sound = new Audio();\n            this.sound.volume = this.volume;\n\n            this.createUrl();\n\n            this.sound.addEventListener(\"ended\", this.ended.bind(this), false);\n            this.sound.addEventListener(\"canplaythrough\", this.can_play_through.bind(this), false);\n            this.sound.addEventListener(\"timeupdate\", this._update.bind(this), false);\n\n            this.load();\n        },\n\n        destroy: function () {\n            this.stop();\n\n            this.sound.removeEventListener(\"ended\", this.ended.bind(this), false);\n            this.sound.removeEventListener(\"canplaythrough\", this.can_play_through.bind(this), false);\n            this.sound.removeEventListener(\"timeupdate\", this._update.bind(this), false);\n\n            this.sound = null;\n            this.loaded = false;\n        },\n\n        createUrl: function () {\n            var rand = new Date().valueOf();\n            this.url = this.path + encodeURIComponent(this.name) + \".\" + settings.supported[0] + \"?\" + rand;\n        },\n\n        can_play_through: function () {\n            if (this.preload) {\n                this.ready();\n            }\n        },\n\n        load: function () {\n            this.sound.src = this.url;\n            this.sound.preload = this.preload ? \"auto\" : \"none\";\n            if (this.preload) {\n                this.sound.load();\n            }\n        },\n\n        setLoop: function (options) {\n            if (options.loop === true) {\n                this.loop = 9999999;\n            } else if (typeof options.loop === \"number\") {\n                this.loop = +options.loop - 1;\n            } else {\n                this.loop = false;\n            }\n        },\n\n        update: function (options) {\n            this.setLoop(options);\n\n            if (\"volume\" in options) {\n                this.volume = options.volume;\n            }\n        },\n\n        ready: function () {\n            if (this.loaded || !this.sound) {\n                return;\n            }\n\n            this.loaded = true;\n            this._ready.call(this._scope, this.sound.duration);\n\n            if (!this.end) {\n                this.end = this.sound.duration;\n            }\n        },\n\n        play: function (options) {\n            if (options) {\n                this.update(options);\n            }\n\n            if (!this.multiplay && this.playing) {\n                return;\n            }\n\n            this._play();\n        },\n\n        _play: function () {\n            if (this.paused) {\n                this.paused = false;\n            } else {\n                try {\n                    this.sound.currentTime = this.start;\n                } catch (e) {}\n            }\n\n            this.playing = true;\n            this.start_time = new Date().valueOf();\n            this.sound.volume = this.volume;\n            this.sound.play();\n        },\n\n        stop: function () {\n            if (!this.playing) {\n                return;\n            }\n\n            this.playing = false;\n            this.paused = false;\n            this.sound.pause();\n            this.clear();\n\n            try {\n                this.sound.currentTime = this.start;\n            } catch (e) {}\n        },\n\n        pause: function () {\n            if (this.paused) {\n                this._play();\n            } else {\n                this.playing = false;\n                this.paused = true;\n                this.sound.pause();\n                this.paused_time = new Date().valueOf();\n                this.played_time += this.paused_time - this.start_time;\n            }\n        },\n\n        _update: function () {\n            if (!this.start_time) {\n                return;\n            }\n\n            var current_time = new Date().valueOf(),\n                played_time = current_time - this.start_time,\n                played = (this.played_time + played_time) / 1000;\n\n            if (played >= this.end) {\n                if (this.playing) {\n                    this.stop();\n                    this._ended();\n                }\n            }\n        },\n\n        ended: function () {\n            if (this.playing) {\n                this.stop();\n                this._ended();\n            }\n        },\n\n        _ended: function () {\n            this.playing = false;\n\n            var config = {\n                name: this.name,\n                alias: this.alias,\n                part: this.sprite_part,\n                start: this.start,\n                duration: this.end\n            };\n\n            if (this.ended_callback && typeof this.ended_callback === \"function\") {\n                this.ended_callback.call(this.scope, config);\n            }\n\n            if (this.loop) {\n                setTimeout(this.looper.bind(this), 15);\n            }\n        },\n\n        looper: function () {\n            this.loop--;\n            this.play();\n        },\n\n        clear: function () {\n            this.start_time = 0;\n            this.played_time = 0;\n            this.paused_time = 0;\n        },\n\n        setVolume: function (options) {\n            this.volume = options.volume;\n\n            if (this.sound) {\n                this.sound.volume = this.volume;\n            }\n        }\n    };\n\n} (window, navigator, window.jQuery || window.$));\n","import './vendor/ion.sound';\n\nconst NOTES = {\n  /* F, C D E F G A B c d e f g a b c' d' e' f' g' a' - abc notation kora scale */\n  SNAP: 'snap',\n  K: 'bell_ring',\n  \"F,\": 'bell_ring',\n  C: 'bell_ring',\n  D: 'bell_ring',\n  E: 'bell_ring',\n  F: 'bell_ring',\n  G: 'bell_ring',\n  A: 'bell_ring',\n  B: 'bell_ring',\n  c: 'bell_ring',\n  d: 'bell_ring',\n  e: 'bell_ring',\n  f: 'bell_ring',\n  g: 'bell_ring',\n  b: 'bell_ring',\n\n  /*Из ABC взято обозначение нот третьей октавы. Используется апостроф. JS на него ругается.\n  Нужно как то иначе определять имена нот не отклоняясь от стандарта ABC  */\n\n  \"c'\": 'bell_ring',\n  \"d'\": 'bell_ring',\n  \"e'\": 'bell_ring',\n  \"f'\": 'bell_ring',\n  \"g'\": 'bell_ring',\n  \"a'\": 'bell_ring',\n};\n\nconst Player = (function () {\n  let instance;\n\n  function GlobalPlayer() {\n    const ion = window.ion;\n\n    ion.sound({\n      sounds: Object.values(NOTES).map(name => ({\n        name,\n        volume: name === NOTES.SNAP\n          ? 1.0\n          : 0.3\n      })),\n      path: \"sounds/\",\n      preload: true,\n      multiplay: true\n    });\n\n    return {\n      playNote: (note) => {\n        if (NOTES[note]) {\n          ion.sound.play(NOTES[note]);\n        }\n      },\n      playSnap: () => {\n        ion.sound.play(NOTES.SNAP);\n      },\n    }\n  }\n\n  return function() {\n    if (!instance) {\n      instance = new GlobalPlayer();\n    }\n\n    return instance;\n  }\n}());\n\nexport default Player;\n","export default function noop() {}\n","const second = 1000;\nconst minute = second * 60;\nimport noop from \"./helpers/noop\";\n\nexport default function Ticker({\n  ticksPerMinute = 60,\n  onTick = noop\n} = {}) {\n  let interval;\n\n  function stop() {\n    clearInterval(interval);\n  }\n\n  function start() {\n    stop();\n\n    interval = setInterval(onTick, minute / ticksPerMinute);\n  }\n\n  return {\n    start,\n    stop\n  }\n}\n","import noop from \"./helpers/noop\";\nimport createElement from \"./helpers/createElement\";\nimport __ from \"./helpers/translate\";\n\nexport default function ControllerView({\n  onPlay = noop,\n  onStop = noop,\n  viewerElement,\n  block = 'harp-view'\n} = {}) {\n  const state = {\n    playing: false\n  };\n\n  const $el = createElement('div', block);\n  const playButton = createElement('button', `${block}__play`, {\n    click: function() {\n      if (!state.playing) {\n        onPlay();\n      } else {\n        onStop();\n      }\n    }\n  });\n\n  function updateButton() {\n    playButton.innerText = __(!state.playing ? 'play' : 'stop');\n  }\n\n  updateButton();\n\n  $el.appendChild(playButton);\n\n  const viewerContainer = createElement('div', `${block}__viewer`);\n  viewerContainer.appendChild(viewerElement);\n  $el.appendChild(viewerContainer);\n\n  function update({playing = state.playing}) {\n    state.playing = playing;\n\n    updateButton();\n  }\n\n  return {\n    $el,\n    update\n  }\n}\n","const PAUSES = new Set(['x', 'z']);\n\nconst isPause = note => PAUSES.has(note);\n\nexport default isPause;\n","import Viewer from \"./viewer\";\nimport Player from './player';\nimport Ticker from './ticker';\nimport ControllerView from \"./controller-view\";\nimport isPause from './helpers/isPause';\n\nexport default function Controller({tune}) {\n  let tick = -1;\n  let tuneIndex = -1;\n  let ticksPerMinute = 60 * 4;\n\n  const tuneArray = tune.split('');\n  const ticksPerSnap = 4;\n  const ticksPerNote = 2;\n  const highLightTicks = 1;\n\n  const viewer = new Viewer();\n  const player = new Player();\n\n  const playAndShow = () => {\n    const note = tuneArray[tuneIndex];\n\n    viewer.dimAll();\n\n    if (isPause(note)) {\n      return;\n    }\n\n    player.playNote(note);\n    viewer.highLight(note);\n  };\n\n  let ticker;\n  let controllerView;\n\n  const stop = () => {\n    tick = -1;\n    tuneIndex = -1;\n\n    controllerView.update({playing: false});\n    ticker.stop();\n    viewer.dimAll();\n  };\n\n  const onTick = () => {\n    tick += 1;\n\n    if (tick % ticksPerNote === highLightTicks) {\n      viewer.dimAll();\n    }\n\n    if (tick % ticksPerNote === 0) {\n      tuneIndex += 1;\n\n      if (tuneIndex === tuneArray.length) {\n        return stop();\n      }\n\n      playAndShow();\n    }\n\n    if (tick % ticksPerSnap === 0) {\n      player.playSnap();\n    }\n  };\n\n  ticker = new Ticker({\n    ticksPerMinute,\n    onTick\n  });\n\n  controllerView = new ControllerView({\n    viewerElement: viewer.$el,\n\n    onPlay() {\n      controllerView.update({playing: true});\n\n      ticker.start();\n    },\n    onStop: stop\n  });\n\n  return controllerView.$el;\n}\n","import insertAfter from './helpers/insertAfter';\nimport __ from './helpers/translate';\nimport tuneValid from './helpers/tuneValid';\nimport Controller from \"./controller\";\n\nwindow.HarpView = function(selector) {\n  document.querySelectorAll('.' + selector).forEach(node => {\n    const tune = node.innerHTML.trim();\n\n    if (!tuneValid(tune)) {\n      console.error(__('error.bad-tune'), node);\n\n      return;\n    }\n\n    insertAfter(new Controller({tune}), node);\n  });\n};\n"]}